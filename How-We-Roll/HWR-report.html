<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Data fra JSON-fil</title>
    <style>
        
body {
    background-color:steelblue;
    margin: 0 auto;
}

/* NAVIGATION BAR styling */
#navbar {
    background-color: darkslateblue;
    height: 120px;
    margin: 0 auto;
}

#navbar a:link {
    color: white;
    text-decoration: none;
}

#navbar a:visited {
    color: white;
}

#navbar a:hover {
    color: orange;
}

.navbarcontain {
    max-width: 1000px;
    margin: 0 auto;
}

#titlename {
    font-size: 25px;
    font-weight: bold;
    display: block;
    float: left;
    text-decoration: none;
    line-height: 120px;
}

#titlecontent {
    font-size: 22px;
    display: inline;
    float: right;
    text-decoration: none;
    line-height: 120px; 
}

.mediumspacingnavbar {
    padding: 25px;
}

/* NAVIGATION BAR styling end */

    </style>

</head>
<body>
                    <!-- NAVIGATION BAR -->
                    <div id="navbar">
                        <div class="navbarcontain">
                            <a id="titlename" href="../index.html"><span style="font-size:30px;">&#x21A9;</span> Homepage</a>
                            <div id="titlecontent">
                                <a class="mediumspacingnavbar" href="./HWR-Form.html">How We Roll Form</a>
                                <a class="mediumspacingnavbar" href="./HWR-report.html">How We Roll Report</a>
            
                            </div>
                        </div>
                    </div>
                    <!-- NAVIGATION BAR-->

    <canvas id="report" width="900px" height="600px"></canvas>

  <script>

    var canvas = document.getElementById('report');
    var context = canvas.getContext('2d');

    
      // lage en for løkke som looper over medlemmene i gruppen slik at alle sine json resultater vises i kanvas med egne farger
    const gruppemedlemmer = {
        "William" : {
            "JsonLink" : "20211007140116-973597d31b0e2c3856263a94c105dae1.json",
            "Farge" : "red"
        },
        "Bastian" : {
            "JsonLink" : "20211007140048-14e3898782f76e8734bdc86301b02b9b.json",
            "Farge" : "blue"
        },
        "Bjørnar" : {
            "JsonLink" : "20211007135925-4b93011609894ed4922ca130cf882dc9.json",
            "Farge" : "brown"
        },
        "Dominikas" : {
            "JsonLink" : "20211008081926-619df3b7b84660c8ec0aaabc8ffadc43.json",
            "Farge" : "purple"
        },
        "Isak" : {
            "JsonLink" : "20211007140837-9f87ea9cfb1145815bf81718d1e99c87.json",
            "Farge" : "green"
        },
        "Sebastian" : {
            "JsonLink" : "20211008082711-f076b72e7ddbc8a7ee5fcaaa4e020d3a.json",
            "Farge" : "orange"
        },
    }

    var canvas = document.getElementById('report');
    var context = canvas.getContext('2d');
    const yStart = 40
    const xStart = 70
    const xEnd = 730
    const ratio = 6.6

    context.font = '14px serif';
    // vi trenger å erstatte textene med en bedre beskrivelse enn 'CorA' etc
    // vi trenger også kanskje flere preferanser enn 4, så canvas ikke er så kort
    context.fillText('CorA', yStart - 10, (yStart*1) + 5);
    context.fillText('AorB', yStart - 10, (yStart*2) + 5);
    context.fillText('DorI', yStart - 10, (yStart*3) + 5);
    context.fillText('TorP', yStart - 10, (yStart*4) + 5);

    context.beginPath();
    context.moveTo(xStart, yStart);
    context.lineTo(xEnd, yStart);

    //context.beginPath();
    context.moveTo(xStart, yStart*2);
    context.lineTo(xEnd, yStart*2);

    context.moveTo(xStart, yStart*3);
    context.lineTo(xEnd, yStart*3);

    context.moveTo(xStart, yStart*4);
    context.lineTo(xEnd, yStart*4);
    context.stroke();

    Object.keys(gruppemedlemmer).map(name => {
 
        jsonUrl = "https://bacit.info/hwr/" + gruppemedlemmer[name]["JsonLink"]
        var i = Object.keys(gruppemedlemmer).indexOf(name);

        fetch(jsonUrl)
        .then(response => response.json())
        .then(data => {
            
        context.fillStyle = "black"
        context.fillText(name, xStart + xEnd + 20, (24*i) + 35)

        var R1 = 5;
        context.beginPath();
        context.arc(xStart + xEnd, (24*i) + 30, R1, 0, 2*Math.PI, false);
        context.fillStyle = gruppemedlemmer[name]["Farge"];
        context.fill();
        context.lineWidth = 1;
        context.strokeStyle = "black";
        context.stroke();


        var X = xStart + (parseInt(data.CorA) * ratio);
        var Y = yStart;
        var R = 5;
        context.beginPath();
        context.arc(X, Y, R, 0, 2*Math.PI, false);
        context.fillStyle = gruppemedlemmer[name]["Farge"];
        context.fill();
        context.lineWidth = 1;
        context.strokeStyle = "black";
        context.stroke();
        //context.closePath();

        var X = xStart + (parseInt(data.AorB) * ratio);
        var Y = yStart*2;
        var R = 5;
        context.beginPath();
        context.arc(X, Y, R, 0, 2*Math.PI, false);
        context.fillStyle = gruppemedlemmer[name]["Farge"];
        context.fill();
        context.lineWidth = 1;
        context.strokeStyle = "black";
        context.stroke();


        var X = xStart + (parseInt(data.DorI) * ratio);
        var Y = yStart*3;
        var R = 5;
        context.beginPath();
        context.arc(X, Y, R, 0, 2*Math.PI, false);
        context.fillStyle = gruppemedlemmer[name]["Farge"];
        context.fill();
        context.lineWidth = 1;
        context.strokeStyle = "black";
        context.stroke();

        var X = xStart + (parseInt(data.TorP) * ratio);
        var Y = yStart*4;
        var R = 5;
        context.beginPath();
        context.arc(X, Y, R, 0, 2*Math.PI, false);
        context.fillStyle = gruppemedlemmer[name]["Farge"];
        context.fill();
        context.lineWidth = 1;
        context.strokeStyle = "black";
        context.stroke();

        });

    })


  </script>
</body>
</html>
